import{V as z}from"./index-513bbaed.js";import{_ as K,d as h,r as _,o as j,v as P,I as E,a as u,z as O,w as n,e as R,b as s,g as k,t as B,J as A,K as V,f as D,V as J,p as U,s as W,L as G,c as C,H as w,B as L}from"./index-987701ae.js";import{m as q}from"./index-3b04c4a4.js";import{h as M}from"./api-e1e47605.js";const H=A(()=>G(()=>Promise.resolve().then(()=>_e),void 0,import.meta.url)),$={data(){return{showReplacement:!1}},components:{replacementComponent:H},setup(){const y=h.school.value.userId||(JSON.parse(localStorage.getItem("schooll"))||{}).userId||"无",r=h.school.value.schoolName||(JSON.parse(localStorage.getItem("schooll"))||{}).schoolName||"无",m=_([]),o=async()=>{var a;const e=W.supapi+"/api/SecondaryEnrollment/getRelationmajor?Transcribe=3",l={method:"GET",headers:{Authorization:"Bearer "+(((a=JSON.parse(localStorage.getItem("taken")))==null?void 0:a.accessToken)||h.takel.accessToken),"content-type":"application/json"}};fetch(e,l).then(c=>c.json()).then(c=>{console.log("查找成功",c),c.data==null||(h.stuRadd.value=c.data,m.value=h.stuRadd.value)})};j(()=>{o()});const d=async e=>{M.api(e);const l=m.value.indexOf(e);l!==-1&&m.value.splice(l,1)},I=_(!1),x=_([]),g=P({current:1,limit:10,total:100}),i=_([{title:"专业代码",width:"120px",key:"spmcode"},{title:"专业名称",width:"120px",key:"spmname"},{title:"操作",width:"20px",customSlot:"o2erator",key:"operator",fixed:"right",ignoreExport:!0}]),v=e=>{I.value=!0,setTimeout(()=>{m.value=t(e.current,e.limit),I.value=!1},1e3)},S=(e,l)=>{m.value.forEach(a=>{a.id===l.id&&V.msg("Success",{icon:1},()=>{a.status=e})})},b=()=>{V.msg(x.value,{area:"50%"})},t=(e,l)=>{for(var a=[],c=(e-1)*l+1,p=e*l,f=c;f<=p;f++)a.push({id:`${f}`,age:"18",sex:"男",name:`张三${f}`,email:"test@qq.com",remark:"花开堪折直须折,莫待无花空折枝.",joinTime:"2022-02-09",city:"浙江杭州",status:!0});return a};return{id:y,name:r,addlxxstu1:o,stud:d,columns:i,dataSource:m,selectedKeys:x,page:g,change:v,changeStatus:S,remove:b}}},F={class:"container-demo"},Q=R("div",{class:"wordallbox"},null,-1),X={class:"ttbox"};function Y(y,r,m,o,d,I){const x=q,g=D,i=J,v=U,S=z,b=E("Some"),t=E("replacementComponent");return d.showReplacement?(u(),O(t,{key:1})):(u(),O(b,{key:0},{default:n(()=>[R("div",F,[s(x,{theme:"green"},{title:n(()=>[k(" 欢迎:"+B(o.name),1)]),_:1}),Q,s(g,{"border-style":"dashed","border-width":"3px",theme:"green"}),R("div",X,[s(S,{resize:!0,height:"100%",columns:o.columns,loading:y.loading,"data-source":o.dataSource,"selected-keys":o.selectedKeys,"onUpdate:selectedKeys":r[0]||(r[0]=e=>o.selectedKeys=e),onChange:o.change,onSortChange:y.sortChange},{status:n(({row:e})=>[s(i,{"model-value":e.status,onChange:l=>o.changeStatus(l,e)},null,8,["model-value","onChange"])]),o2erator:n(({row:e})=>[s(v,{size:"xs",type:"primary",onClick:l=>o.stud(e)},{default:n(()=>[k("添加")]),_:2},1032,["onClick"])]),default:n(()=>[k(" s ")]),_:1},8,["columns","loading","data-source","selected-keys","onChange","onSortChange"])]),s(g,{"border-style":"dashed","border-width":"3px",theme:"green"}),s(v,{class:"back",type:"primary",onClick:r[1]||(r[1]=e=>d.showReplacement=!d.showReplacement)},{default:n(()=>[k("返回")]),_:1})])]),_:1}))}const Z=K($,[["render",Y]]);const ee={components:{ReplacementComponent:Z},data(){return{showReplacement:!1}},setup(){const y=h.school.value.userId||(JSON.parse(localStorage.getItem("schooll"))||{}).userId||"无",r=h.school.value.schoolName||(JSON.parse(localStorage.getItem("schooll"))||{}).schoolName||"无",m=async a=>{V.confirm(a.auditRemark)},o=_([]),d=async()=>{var p;const a=W.supapi+"/api/SecondaryEnrollment/getprofessionalplans?transcribe=3",c={method:"GET",headers:{Authorization:"Bearer "+(((p=JSON.parse(localStorage.getItem("taken")))==null?void 0:p.accessToken)||h.takel.accessToken)}};try{const N=await(await fetch(a,c)).json();h.stuR.value=N.data,o.value=h.stuR.value,console.log(o.value)}catch(f){console.log("数据获取失败：",f)}};j(()=>{d()});const I=_([{value:1,label:"",closable:!1}]),x=_(""),g=_(!1),i=_([]),v=P({current:1,limit:10,total:100}),S=_([{title:"专业代码",width:"50px",key:"spmcode",sort:"desc"},{title:"专业名称",width:"50px",key:"spmname"},{title:"原计划数",width:"40px",key:"orginal_plan_number"},{title:"拟计划数",width:"40px",key:"planned_number"},{title:"状态",width:"40px",key:"state",customSlot:"word3"}]),b=a=>{g.value=!0,setTimeout(()=>{o.value=l(a.current,a.limit),g.value=!1},1e3)},t=(a,c)=>{o.value.forEach(p=>{p.id===c.id&&V.msg("Success",{icon:1},()=>{p.status=a})})},e=()=>{V.msg(i.value,{area:"50%"})},l=(a,c)=>{for(var p=[],f=(a-1)*c+1,N=a*c,T=f;T<=N;T++)p.push({id:`${T}`,age:"18",sex:"男",name:`张三${T}`,email:"test@qq.com",remark:"花开堪折直须折,莫待无花空折枝.",joinTime:"2022-02-09",city:"浙江杭州",status:!0});return p};return{id:y,name:r,openConfirm:m,lxxdata1:d,data1:I,inputValue1:x,columns:S,dataSource:o,selectedKeys:i,page:v,change:b,changeStatus:t,remove:e}}},te={key:0},oe={class:"container-demo"},ae={style:{height:"800px"}},ne={key:0,id:"WcCc0",style:{color:"rgb(123, 123, 123)"}},se={key:1,id:"WcCc1",style:{color:"rgb(36, 135, 255)"}},le={key:2,id:"WcCc2",style:{color:"rgb(26,188,156)"}},ce={key:3,id:"WcCc3",style:{color:"rgb(248, 50, 10)"}},re={key:4,id:"WcCc4",style:{color:"rgb(36, 135, 255)"}},de={key:5,id:"WcCc5",style:{color:"rgb(0, 0, 0)"}},ie=R("p",null,"不可操作",-1),ue={key:1,class:"replacement-wrapr"};function me(y,r,m,o,d,I){const x=q,g=J,i=U,v=L,S=z,b=E("ReplacementComponent");return d.showReplacement?(u(),C("div",ue,[s(b)])):(u(),C("div",te,[R("div",oe,[s(x,{theme:"green"},{title:n(()=>[k(" 欢迎:"+B(o.name),1)]),_:1}),R("div",ae,[s(S,{resize:!0,height:"90%",columns:o.columns,loading:y.loading,"default-toolbar":!0,"data-source":o.dataSource,"selected-keys":o.selectedKeys,"onUpdate:selectedKeys":r[1]||(r[1]=t=>o.selectedKeys=t),onChange:o.change,onSortChange:y.sortChange},{date:n(({row:t})=>[]),status:n(({row:t})=>[s(g,{"model-value":t.status,onChange:e=>o.changeStatus(e,t)},null,8,["model-value","onChange"])]),toolbar:n(()=>[s(i,{size:"sm",type:"primary",onClick:r[0]||(r[0]=t=>d.showReplacement=!0)},{default:n(()=>[k("添加专业")]),_:1})]),word3:n(({row:t})=>[t.state===0?(u(),C("p",ne," 待提交 ")):w("",!0),t.state===1?(u(),C("p",se," 审核中 ")):w("",!0),t.state===2?(u(),C("p",le," 待核对 ")):w("",!0),t.state===3?(u(),C("p",ce," 已退回 ")):w("",!0),t.state===4?(u(),C("p",re," 待定稿 ")):w("",!0),t.state===5?(u(),C("p",de," 已定稿 ")):w("",!0)]),operator:n(({row:t})=>[t.state==3?(u(),O(i,{key:0,size:"xs",type:"primary",onClick:e=>o.openConfirm(t)},{default:n(()=>[k("查看原因")]),_:2},1032,["onClick"])):w("",!0),ie,s(i,{size:"xs",type:"primary"},{default:n(()=>[k("修改")]),_:1}),s(i,{size:"xs"},{default:n(()=>[k("删除")]),_:1})]),Input1:n(({row:t})=>[s(v,{modelValue:t.orginal_plan_number,"onUpdate:modelValue":e=>t.orginal_plan_number=e,placeholder:"请输入",style:{width:"180px"}},null,8,["modelValue","onUpdate:modelValue"])]),Input2:n(({row:t})=>[s(v,{modelValue:t.planned_number,"onUpdate:modelValue":e=>t.planned_number=e,placeholder:"请输入",style:{width:"180px"}},null,8,["modelValue","onUpdate:modelValue"])]),_:1},8,["columns","loading","data-source","selected-keys","onChange","onSortChange"])])])]))}const pe=K(ee,[["render",me]]),_e=Object.freeze(Object.defineProperty({__proto__:null,default:pe},Symbol.toStringTag,{value:"Module"}));export{pe as default};
