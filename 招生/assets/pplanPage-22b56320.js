import{V as Y}from"./index-513bbaed.js";import{_ as P,d as t,r as y,k as W,o as R,I as w,a as i,z as j,w as s,e as M,b as u,g as x,t as B,J as A,K as V,f as Q,p as X,B as F,s as K,L as Z,v as q,c as k,M as H,H as b,V as $,N as ee}from"./index-987701ae.js";/* empty css              */import{m as L}from"./index-3b04c4a4.js";import{c as te,d as O,e as oe,f as ae,g as ne}from"./api-e1e47605.js";import{a as se}from"./inputPage-8871ebd3.js";import"./index-189cdbbf.js";const le=A(()=>Z(()=>Promise.resolve().then(()=>Ve),void 0,import.meta.url)),ce={data(){return{showReplacement:!1}},components:{replacementComponent:le},setup(){const S=t.school.value.userId||(JSON.parse(localStorage.getItem("schooll"))||{}).userId||"无",p=t.school.value.schoolName||(JSON.parse(localStorage.getItem("schooll"))||{}).schoolName||"无",m=y("1"),o=y(["2","3","6","7"]),v=async(_,a)=>{m.value=_[0],console.log("选中的值：",m.value)};t.e6a5bde689bde698afe4bda2e58aa2e4bb9be8bf9ee4baa5e4bb94e6af92=!0,W(m,_=>{var n;const a=K.supapi+"/api/SecondaryEnrollment/getareapopulation?PPId="+_,d={method:"GET",headers:{Authorization:"Bearer "+(((n=JSON.parse(localStorage.getItem("taken")))==null?void 0:n.accessToken)||t.takel.accessToken),"content-type":"application/json"}};fetch(a,d).then(l=>l.json()).then(l=>{console.log(l),t.stucitynuber.value=l.data,t.stucitynuber.value==null?(console.log("有值为空"),r.value.forEach((J,f)=>{J.number=0})):r.value.forEach((J,f)=>{J.number=t.stucitynuber.value[f].number}),console.log("1132313"),console.log(r.value)}).then(l=>{console.log(l)})});const T=async()=>{const _=[],a=document.querySelectorAll('input[type="number"]');for(let n=0;n<r.value.length;n++){const l={regionid:r.value[n].value,regionname:r.value[n].key,number:parseInt(a[n].value,10)};_.push(l)}var d=m.value;te.api(d,_)},N=async()=>{var d;t.e6a5bde689bde698afe4bda2e58aa2e4bb9be8bf9ee4baa5e4bb94e6af92=!0;const _=K.supapi+"/api/SecondaryEnrollment/getregion?key=city",a={method:"GET",headers:{Authorization:"Bearer "+(((d=JSON.parse(localStorage.getItem("taken")))==null?void 0:d.accessToken)||t.takel.accessToken),"content-type":"application/json"}};fetch(_,a).then(n=>n.json()).then(n=>{console.log(n),r.value=n.data,console.log("12312312313");for(var l=0;l<r.value.length;l++)r.value[l].number=0;console.log(r.value)}).then(n=>{console.log(n)})},I=y([]),h=async()=>{var d;t.e6a5bde689bde698afe4bda2e58aa2e4bb9be8bf9ee4baa5e4bb94e6af92=!0;const _=K.supapi+"/api/SecondaryEnrollment/getprofessionalplans?transcribe=2&exception=1",a={method:"GET",headers:{Authorization:"Bearer "+(((d=JSON.parse(localStorage.getItem("taken")))==null?void 0:d.accessToken)||t.takel.accessToken)}};try{const l=await(await fetch(_,a)).json();console.log(l.data),I.value=l.data,console.log("123123"),console.log(I.value)}catch(n){console.log("数据获取失败：",n)}};R(()=>{N()}),R(()=>{h()});const g=[{title:"市州",width:"200px",key:"key"},{title:"计划处",width:"200px",key:"number",customSlot:"Input2",scopedSlots:{customRender:"Input2"}}],r=y([]),C=y(),z=()=>{o.value=["1","2","3"]},e=()=>{o.value=[]},c=()=>{V.msg(o.value)},E=()=>{V.msg(C.value.getCheckData())},U=[{fixed:"left",width:"10px",type:"radio",title:"单选"},{title:"专业代码",width:"10px",key:"spmcode"},{title:"专业名称",width:"10px",key:"spmname"},{title:"计划总人数",width:"10px",key:"planned_number"}],G=y(1),D=y(0);return{id:S,name:p,baocun:T,handleSelectChange:v,lxxapi:h,columns3:U,dataSource3:I,selectedKeys3:o,getSelectedKeys3:c,getCheckData3:E,tableRef3:C,changeSelectedKeys3:z,clearSelectedKeys3:e,selectedKey3:m,selected1:G,data1:D,columns8:g,dataSource8:r}}},ie={class:"container-demo"},re={class:"allbox"},de={class:"boxpp"},ue={class:"wordtable",style:{height:"500px"}};function pe(S,p,m,o,v,T){const N=L,I=Q,h=X,g=Y,r=F,C=w("Some"),z=w("replacementComponent");return v.showReplacement?(i(),j(z,{key:1})):(i(),j(C,{key:0},{default:s(()=>[M("div",ie,[u(N,{theme:"green"},{title:s(()=>[x(" 欢迎:"+B(o.name),1)]),_:1}),u(I,{"border-style":"dashed","border-width":"3px",theme:"green"}),M("div",re,[M("div",de,[u(g,{height:"500px",ref:"tableRef3",columns:o.columns3,"data-source":o.dataSource3,size:S.sm,"default-toolbar":!0,id:"ppid",selectedKey:o.selectedKey3,"onUpdate:selectedKey":p[1]||(p[1]=e=>o.selectedKey3=e),selectedKeys:o.selectedKeys3,"onUpdate:selectedKeys":p[2]||(p[2]=e=>o.selectedKeys3=e),style:{display:"flex","align-items":"center","justify-content":"center"},onSelectedKey3Change:o.handleSelectChange},{toolbar:s(()=>[u(h,{size:"sm",onClick:o.baocun},{default:s(()=>[x("保存")]),_:1},8,["onClick"]),u(h,{size:"sm",type:"primary",onClick:p[0]||(p[0]=e=>v.showReplacement=!v.showReplacement)},{default:s(()=>[x("返回")]),_:1})]),_:1},8,["columns","data-source","size","selectedKey","selectedKeys","onSelectedKey3Change"])]),M("div",ue,[u(g,{columns:o.columns8,"data-source":o.dataSource8,even:""},{Input2:s(({row:e})=>[u(r,{modelValue:e.number,"onUpdate:modelValue":c=>e.number=c,allowClear:"",type:"number",max:300,min:0},null,8,["modelValue","onUpdate:modelValue"])]),_:1},8,["columns","data-source"])])]),u(I,{"border-style":"dashed","border-width":"3px",theme:"green"})])]),_:1}))}const me=P(ce,[["render",pe]]);const he={components:{ReplacementComponent:me},data(){return{showReplacement:!1}},setup(){const S=t.school.value.userId||(JSON.parse(localStorage.getItem("schooll"))||{}).userId||"无",p=t.school.value.schoolName||(JSON.parse(localStorage.getItem("schooll"))||{}).schoolName||"无",m=y([]),o=async()=>{t.op=!1,console.log(t.stucity.value),O.api()},v=async a=>{V.confirm(a.auditRemark)},T=async(a,d)=>{t.op=!1,oe.api(a,d),O.api()},N=function(a){t.op=!1,t.rowschool.value=a,t.stuppid=a.ppid,console.log(t.stuppid),V.open({type:"page",title:"修改相关信息",content:H(se)}),O.api()},I=async a=>{t.op=!1,ae.api(a),O.api()},h=async a=>{t.op=!1,console.log(a.ppid),ne.api(a),O.api()},g=async()=>{var n;t.op=!1,t.e6a5bde689bde698afe4bda2e58aa2e4bb9be8bf9ee4baa5e4bb94e6af92=!1;const a=K.supapi+"/api/SecondaryEnrollment/getprofessionalplans?transcribe=2",d={method:"GET",headers:{Authorization:"Bearer "+(((n=JSON.parse(localStorage.getItem("taken")))==null?void 0:n.accessToken)||t.takel.accessToken)}};try{t.stucity=y([]);const J=await(await fetch(a,d)).json();t.stupp.value=J.data,m.value=t.stupp.value,m.value.forEach(f=>{(f.state==0||f.state==3)&&t.stucity.value.push(f)}),console.log(m.value)}catch(l){console.log("数据获取失败：",l)}};R(()=>{g()});const r=y([{value:1,label:"",closable:!1}]),C=y(""),z=y(!1),e=y([]),c=q({current:1,limit:10,total:100}),E=y([{title:"专业代码",width:"50",key:"spmcode",sort:"desc"},{title:"专业名称",width:"50",key:"spmname"},{title:"原计划数",width:"50",key:"orginal_plan_number"},{title:"拟计划数",width:"50",key:"planned_number"},{title:"学费",width:"50",key:"tuition"},{title:"专业备注",width:"60",key:"zybz",customSlot:"zybz"},{title:"联系电话",width:"60",key:"tel"},{title:"学校地址",width:"60",key:"address"},{title:"状态",width:"50",key:"state",customSlot:"word3"},{title:"操作",customSlot:"operator",key:"operator",fixed:"right",ignoreExport:!0}]),U=a=>{z.value=!0,setTimeout(()=>{m.value=_(a.current,a.limit),z.value=!1},1e3)};W(t.stupp,()=>{console.log(t.e6a5bde689bde698afe4bda2e58aa2e4bb9be8bf9ee4baa5e4bb94e6af92),console.log(t.op),m.value==t.stupp.value||t.e6a5bde689bde698afe4bda2e58aa2e4bb9be8bf9ee4baa5e4bb94e6af92==!0||t.op==!0?(t.op=!1,console.log("一样的")):t.op==!1?(g(),t.op=!0):(console.log("触发"),g())},{immediate:!0});const G=(a,d)=>{m.value.forEach(n=>{n.id===d.id&&V.msg("Success",{icon:1},()=>{n.status=a})})},D=()=>{V.msg(e.value,{area:"50%"})},_=(a,d)=>{for(var n=[],l=(a-1)*d+1,J=a*d,f=l;f<=J;f++)n.push({id:`${f}`,age:"18",sex:"男",name:`张三${f}`,email:"test@qq.com",remark:"花开堪折直须折,莫待无花空折枝.",joinTime:"2022-02-09",city:"浙江杭州",status:!0});return n};return{id:S,name:p,chakan:v,handleFileUpload:T,shenbao:o,openConfirm:N,shen:I,del:h,data1:r,inputValue1:C,columns:E,dataSource:m,selectedKeys:e,page:c,change:U,changeStatus:G,remove:D}}},ye={key:0},be={class:"container-demo"},_e={class:"scroll-container1"},ge={class:"scroll-contents"},fe={key:0,size:"xs",type:"primary",style:{"text-align":"center"}},ke={key:0},ve={key:1},Ie={key:0,id:"WcCc0",style:{color:"rgb(123, 123, 123)"}},xe={key:1,id:"WcCc1",style:{color:"rgb(36, 135, 255)"}},Se={key:2,id:"WcCc2",style:{color:"rgb(26,188,156)"}},Ce={key:3,id:"WcCc3",style:{color:"rgb(248, 50, 10)"}},ze={key:4,id:"WcCc4",style:{color:"rgb(36, 135, 255)"}},je={key:5,id:"WcCc5",style:{color:"rgb(0, 0, 0)"}},Ne={key:1,class:"replacement-wrapr"};function Je(S,p,m,o,v,T){const N=L,I=$,h=X,g=ee,r=F,C=Y,z=w("ReplacementComponent");return v.showReplacement?(i(),k("div",Ne,[u(z)])):(i(),k("div",ye,[M("div",be,[u(N,{theme:"green"},{title:s(()=>[x(" 欢迎:"+B(o.name),1)]),_:1}),M("div",_e,[M("div",ge,[u(C,{resize:!1,height:"90%",columns:o.columns,loading:S.loading,"default-toolbar":!0,"data-source":o.dataSource,"selected-keys":o.selectedKeys,"onUpdate:selectedKeys":p[1]||(p[1]=e=>o.selectedKeys=e),onChange:o.change,onSortChange:S.sortChange},{date:s(({row:e})=>[]),status:s(({row:e})=>[u(I,{"model-value":e.status,onChange:c=>o.changeStatus(c,e)},null,8,["model-value","onChange"])]),toolbar:s(()=>[u(h,{size:"sm",type:"primary",onClick:o.shenbao},{default:s(()=>[x("提交申报")]),_:1},8,["onClick"]),u(h,{size:"sm",type:"primary",onClick:p[0]||(p[0]=e=>v.showReplacement=!0)},{default:s(()=>[x("计划分市州")]),_:1})]),operator:s(({row:e})=>[e.state==1||e.state==2||e.state==4||e.state==5?(i(),k("p",fe,"暂不可操作")):b("",!0),e.state==0||e.state==3?(i(),j(h,{key:1,size:"xs",type:"primary",onClick:c=>o.shen(e)},{default:s(()=>[x("申报")]),_:2},1032,["onClick"])):b("",!0),e.state==0||e.state==3?(i(),j(h,{key:2,size:"xs",onClick:c=>o.openConfirm(e)},{default:s(()=>[x("修改")]),_:2},1032,["onClick"])):b("",!0),e.state==0||e.state==3?(i(),j(h,{key:3,size:"xs",onClick:c=>o.del(e)},{default:s(()=>[x("删除")]),_:2},1032,["onClick"])):b("",!0),e.state==3?(i(),j(h,{key:4,size:"xs",onClick:c=>o.chakan(e)},{default:s(()=>[x("查看原因")]),_:2},1032,["onClick"])):b("",!0),e.abnormal==0&&(e.state==0||e.state==3)?(i(),j(g,{key:5,multiple:!0,size:10240,text:"上传文件",acceptMime:"application/pdf",style:{"margin-left":"10px"},headers:{Authorization:"Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiIzOTc1IiwibmFtZSI6IjE0MzkzIiwidXNlcmlkIjoiMzk3NSIsImFjY291bnQiOiIxNDM5MyIsInVzZXJ0eXBlIjoiMCIsImVtaWFsIjoiIiwicGhvbmUiOiIiLCJzY2hvb2x0eXBlIjoiMSIsInNjaG9vbG5hbWUiOiLlt53ljJflubzlhL_luIjojIPpq5jnrYnkuJPnp5HlrabmoKEiLCJuYmYiOjE2OTk3NTUxMDMsImV4cCI6MTczMTI5MTEwMywiaXNzIjoiaHR0cDovL2xvY2FsaG9zdDo1MDY1IiwiYXVkIjoiSFNDbGllbnQifQ.5G_Q4leGvJ7SWzh9AgKOv_nqGpSfUJizukSUKZ0CZ70"},data:e.ddird,onDone:c=>o.handleFileUpload(c,e)},null,8,["headers","data","onDone"])):b("",!0),e.abnormal==2&&(e.state==0||e.state==3)?(i(),j(g,{key:6,multiple:!0,size:10240,text:"重新上传",acceptMime:"application/pdf",style:{"margin-left":"10px"},headers:{Authorization:"Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiIzOTc1IiwibmFtZSI6IjE0MzkzIiwidXNlcmlkIjoiMzk3NSIsImFjY291bnQiOiIxNDM5MyIsInVzZXJ0eXBlIjoiMCIsImVtaWFsIjoiIiwicGhvbmUiOiIiLCJzY2hvb2x0eXBlIjoiMSIsInNjaG9vbG5hbWUiOiLlt53ljJflubzlhL_luIjojIPpq5jnrYnkuJPnp5HlrabmoKEiLCJuYmYiOjE2OTk3NTUxMDMsImV4cCI6MTczMTI5MTEwMywiaXNzIjoiaHR0cDovL2xvY2FsaG9zdDo1MDY1IiwiYXVkIjoiSFNDbGllbnQifQ.5G_Q4leGvJ7SWzh9AgKOv_nqGpSfUJizukSUKZ0CZ70"},data:e.ddird,onDone:c=>o.handleFileUpload(c,e)},null,8,["headers","data","onDone"])):b("",!0)]),Input1:s(({row:e})=>[u(r,{modelValue:e.orginal_plan_number,"onUpdate:modelValue":c=>e.orginal_plan_number=c,placeholder:"请输入",style:{width:"180px"}},null,8,["modelValue","onUpdate:modelValue"])]),Input2:s(({row:e})=>[u(r,{modelValue:e.planned_number,"onUpdate:modelValue":c=>e.planned_number=c,placeholder:"请输入",style:{width:"180px"}},null,8,["modelValue","onUpdate:modelValue"])]),zybz:s(({row:e})=>[e.zybz==null?(i(),k("p",ke,"无")):(i(),k("p",ve,B(e.zybz),1))]),word3:s(({row:e})=>[e.state===0?(i(),k("p",Ie," 待提交 ")):b("",!0),e.state===1?(i(),k("p",xe," 审核中 ")):b("",!0),e.state===2?(i(),k("p",Se," 待核对 ")):b("",!0),e.state===3?(i(),k("p",Ce," 已退回 ")):b("",!0),e.state===4?(i(),k("p",ze," 待定稿 ")):b("",!0),e.state===5?(i(),k("p",je," 已定稿 ")):b("",!0)]),_:1},8,["columns","loading","data-source","selected-keys","onChange","onSortChange"])])])])]))}const Me=P(he,[["render",Je]]),Ve=Object.freeze(Object.defineProperty({__proto__:null,default:Me},Symbol.toStringTag,{value:"Module"}));export{Me as default};
