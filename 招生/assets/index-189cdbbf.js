import{h as T,i as $,r as m,T as j,q as s,k as I,U as N,W as r,a as p,c as v,e as O,n as q,C as A,y as i,b as F,A as L,H as f,t as R}from"./index-987701ae.js";const D={class:"layui-textarea-wrapper"},E=["rows","cols","value","placeholder","name","disabled","maxlength"],U={key:0,class:"layui-textarea-clear"},W={key:1,class:"layui-texterea-count"},J=T($({name:"LayTextarea",props:{modelValue:null,name:null,placeholder:null,disabled:{type:Boolean},showCount:{type:Boolean},allowClear:{type:Boolean},cols:null,rows:null,maxlength:null,autosize:{type:[Boolean,Object]}},emits:["blur","input","update:modelValue","change","focus","clear"],setup(a,{expose:g,emit:o}){const l=a,n=m(null),c=m(!1),x=j(),d=m("auto"),y=s(()=>({width:l.cols?"":"100%",height:l.rows?"":d.value,minHeight:l.rows?"":"100px"})),b=s(()=>Object.assign(y.value,x.style)),h=function(e){const t=e.target;c.value||(o("update:modelValue",t.value),r(()=>{o("input",t.value)}))},w=function(e){o("focus",e)},V=function(e){o("blur",e)},k=e=>{const t=e.target;o("change",t.value)},B=function(){o("update:modelValue",""),o("clear")},_=()=>{c.value=!0},z=e=>{c.value=!1,h(e)},C=s(()=>{var e;return((e=l.modelValue)==null?void 0:e.length)>0}),H=s(()=>{var e,t;let u=String((t=(e=l.modelValue)==null?void 0:e.length)!=null?t:0);return l.maxlength&&(u+="/"+l.maxlength),u});return I([()=>l.modelValue,n],()=>{var e;if(!n.value||!l.autosize)return;const t=((e=n.value)==null?void 0:e.scrollHeight)+2;if(N(l.autosize)){const{minHeight:u,maxHeight:S}=l.autosize;if(t<u||t>S)return}d.value="1px",r(()=>{var u;d.value=`${((u=n.value)==null?void 0:u.scrollHeight)+2}px`})},{immediate:!0}),g({focus:()=>{r(()=>{var e;(e=n.value)==null||e.focus()})},blur:()=>{r(()=>{var e;(e=n.value)==null||e.blur()})}}),(e,t)=>(p(),v("div",D,[O("textarea",{ref_key:"textareaRef",ref:n,class:q(["layui-textarea",{"layui-textarea-disabled":a.disabled}]),rows:a.rows,cols:a.cols,value:a.modelValue,placeholder:a.placeholder,name:a.name,disabled:a.disabled,maxlength:a.maxlength,style:A(i(b)),onCompositionstart:_,onCompositionend:z,onInput:h,onFocus:w,onChange:k,onBlur:V},null,46,E),a.allowClear&&i(C)?(p(),v("span",U,[F(i(L),{type:"layui-icon-close-fill",onClick:B})])):f("",!0),a.showCount?(p(),v("div",W,R(i(H)),1)):f("",!0)]))}}));export{J as C};
