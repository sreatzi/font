import{V as K,W as D}from"./index-513bbaed.js";import{_ as j,d as h,o as z,r as _,v as P,I as E,a as p,z as O,w as s,e as V,b as l,g as b,t as J,J as U,K as T,f as M,V as W,p as A,s as B,L as G,c as x,M as L,H as I}from"./index-987701ae.js";/* empty css              */import{m as q}from"./index-3b04c4a4.js";import{b as H}from"./api-e1e47605.js";import{a as F}from"./inputPage-8871ebd3.js";import"./index-189cdbbf.js";const Q=U(()=>G(()=>Promise.resolve().then(()=>ge),void 0,import.meta.url)),X={data(){return{showReplacement:!1}},components:{replacementComponent:Q},setup(){const i=h.school.value.userId||(JSON.parse(localStorage.getItem("schooll"))||{}).userId||"无",a=h.school.value.schoolName||(JSON.parse(localStorage.getItem("schooll"))||{}).schoolName||"无",g=async()=>{var n;const e=B.supapi+"/api/SecondaryEnrollment/getRelationmajor?Transcribe=2",r={method:"GET",headers:{Authorization:"Bearer "+(((n=JSON.parse(localStorage.getItem("taken")))==null?void 0:n.accessToken)||h.takel.accessToken),"content-type":"application/json"}};fetch(e,r).then(d=>d.json()).then(d=>{console.log("查找成功",d),d.data==null||(h.stuadd.value=d.data,c.value=h.stuadd.value)})};z(()=>{g()});const t=async e=>{H.api(e);const r=c.value.indexOf(e);r!==-1&&c.value.splice(r,1)},u=_(!1),w=_([]),k=P({current:1,limit:10,total:100}),y=_([{title:"专业代码",width:"120px",key:"spmcode"},{title:"专业名称",width:"120px",key:"spmname"},{title:"操作",width:"40px",customSlot:"operator",key:"operator",fixed:"right",ignoreExport:!0}]),v=e=>{u.value=!0,setTimeout(()=>{c.value=o(e.current,e.limit),u.value=!1},1e3),console.log(c.value)},c=_([]),C=(e,r)=>{c.value.forEach(n=>{n.id===r.id&&T.msg("Success",{icon:1},()=>{n.status=e})})},S=()=>{T.msg(w.value,{area:"50%"})},o=(e,r)=>{for(var n=[],d=(e-1)*r+1,m=e*r,f=d;f<=m;f++)n.push({id:`${f}`,age:"18",sex:"男",name:`张三${f}`,email:"test@qq.com",remark:"花开堪折直须折,莫待无花空折枝.",joinTime:"2022-02-09",city:"浙江杭州",status:!0});return n};return{id:i,name:a,stud:t,columns:y,dataSource:c,selectedKeys:w,page:k,change:v,changeStatus:C,remove:S}}},Y={class:"container-demo"},Z=V("div",{class:"wordallbox"},null,-1),$={class:"ttbox"};function ee(i,a,g,t,u,w){const k=q,y=M,v=W,c=A,C=K,S=E("Some"),o=E("replacementComponent");return u.showReplacement?(p(),O(o,{key:1})):(p(),O(S,{key:0},{default:s(()=>[V("div",Y,[l(k,{theme:"green"},{title:s(()=>[b(" 欢迎:"+J(t.name),1)]),_:1}),Z,l(y,{"border-style":"dashed","border-width":"3px",theme:"green"}),V("div",$,[l(C,{resize:!0,height:"100%",columns:t.columns,loading:i.loading,"data-source":t.dataSource,"selected-keys":t.selectedKeys,"onUpdate:selectedKeys":a[0]||(a[0]=e=>t.selectedKeys=e),onChange:t.change,onSortChange:i.sortChange},{status:s(({row:e})=>[l(v,{"model-value":e.status,onChange:r=>t.changeStatus(r,e)},null,8,["model-value","onChange"])]),operator:s(({row:e})=>[l(c,{size:"xs",type:"primary",onClick:r=>t.stud(e)},{default:s(()=>[b("添加")]),_:2},1032,["onClick"])]),_:1},8,["columns","loading","data-source","selected-keys","onChange","onSortChange"])]),l(y,{"border-style":"dashed","border-width":"3px",theme:"green"}),l(c,{class:"back",type:"primary",onClick:a[1]||(a[1]=e=>u.showReplacement=!u.showReplacement)},{default:s(()=>[b("返回")]),_:1})])]),_:1}))}const te=j(X,[["render",ee]]);const oe={components:{ReplacementComponent:te},data(){return{showReplacement:!1}},setup(){const i=h.school.value.userId||(JSON.parse(localStorage.getItem("schooll"))||{}).userId||"无",a=h.school.value.schoolName||(JSON.parse(localStorage.getItem("schooll"))||{}).schoolName||"无",g=_([]),t=async()=>{var m;const n=B.supapi+"/api/SecondaryEnrollment/getprofessionalplans?transcribe=2",d={method:"GET",headers:{Authorization:"Bearer "+(((m=JSON.parse(localStorage.getItem("taken")))==null?void 0:m.accessToken)||h.takel.accessToken)}};try{const R=await(await fetch(n,d)).json();h.stuAll.value=R.data,g.value=h.stuAll.value,console.log(g.value)}catch(f){console.log("数据获取失败：",f)}};z(()=>{t()});const u=_([{value:1,label:"",closable:!1}]),w=_(""),k=_(!1),y=_([]),v=P({current:1,limit:10,total:100}),c=function(){T.open({type:"page",title:"修改相关信息",content:L(F)})},C=_([{title:"专业代码",width:"50px",key:"spmcode",fixed:"left",sort:"desc"},{title:"专业名称",width:"50px",key:"spmname",sort:"desc"},{title:"原计划数",width:"50px",key:"orginal_plan_number"},{title:"拟计划数",width:"50px",key:"planned_number"},{title:"状态",width:"40px",key:"state",customSlot:"word3"}]),S=n=>{k.value=!0,setTimeout(()=>{g.value=r(n.current,n.limit),k.value=!1},1e3)},o=(n,d)=>{g.value.forEach(m=>{m.id===d.id&&T.msg("Success",{icon:1},()=>{m.status=n})})},e=()=>{T.msg(y.value,{area:"50%"})},r=(n,d)=>{for(var m=[],f=(n-1)*d+1,R=n*d,N=f;N<=R;N++)m.push({id:`${N}`,age:"18",sex:"男",name:`张三${N}`,email:"test@qq.com",remark:"花开堪折直须折,莫待无花空折枝.",joinTime:"2022-02-09",city:"浙江杭州",status:!0});return m};return{id:i,name:a,openConfirm:c,data1:u,inputValue1:w,columns:C,dataSource:g,selectedKeys:y,page:v,change:S,changeStatus:o,remove:e}}},ne={key:0},ae={class:"container-demo"},se={style:{height:"800px"}},le=V("p",null,"不可操作",-1),ce={key:0,id:"WcCc0",style:{color:"rgb(123, 123, 123)"}},re={key:1,id:"WcCc1",style:{color:"rgb(36, 135, 255)"}},de={key:2,id:"WcCc2",style:{color:"rgb(26,188,156)"}},ie={key:3,id:"WcCc3",style:{color:"rgb(248, 50, 10)"}},ue={key:4,id:"WcCc4",style:{color:"rgb(36, 135, 255)"}},me={key:5,id:"WcCc5",style:{color:"rgb(0, 0, 0)"}},pe={key:1,class:"replacement-wrapr"};function _e(i,a,g,t,u,w){const k=q,y=W,v=A,c=D,C=K,S=E("ReplacementComponent");return u.showReplacement?(p(),x("div",pe,[l(S)])):(p(),x("div",ne,[V("div",ae,[l(k,{theme:"green"},{title:s(()=>[b(" 欢迎:"+J(t.name),1)]),_:1}),V("div",se,[l(C,{resize:!0,height:"90%",columns:t.columns,loading:i.loading,"default-toolbar":!0,"data-source":t.dataSource,"selected-keys":t.selectedKeys,"onUpdate:selectedKeys":a[3]||(a[3]=o=>t.selectedKeys=o),onChange:t.change,onSortChange:i.sortChange},{status:s(({row:o})=>[l(y,{"model-value":o.status,onChange:e=>t.changeStatus(e,o)},null,8,["model-value","onChange"])]),toolbar:s(()=>[l(v,{size:"sm",type:"primary",onClick:a[0]||(a[0]=o=>u.showReplacement=!0)},{default:s(()=>[b("添加专业")]),_:1})]),operator:s(({row:o})=>[le,l(v,{size:"xs",type:"primary",onClick:t.openConfirm},{default:s(()=>[b("修改")]),_:1},8,["onClick"]),l(v,{size:"xs"},{default:s(()=>[b("删除")]),_:1})]),Input1:s(({row:o})=>[l(c,{modelValue:t.data1,"onUpdate:modelValue":a[1]||(a[1]=e=>t.data1=e),inputValue:i.inputValue2,"onUpdate:inputValue":a[2]||(a[2]=e=>i.inputValue2=e),allowClear:"",placeholder:"请输入",style:{width:"180px"}},null,8,["modelValue","inputValue"])]),word3:s(({row:o})=>[o.state===0?(p(),x("p",ce," 待提交 ")):I("",!0),o.state===1?(p(),x("p",re," 审核中 ")):I("",!0),o.state===2?(p(),x("p",de," 待核对 ")):I("",!0),o.state===3?(p(),x("p",ie," 已退回 ")):I("",!0),o.state===4?(p(),x("p",ue," 待定稿 ")):I("",!0),o.state===5?(p(),x("p",me," 已定稿 ")):I("",!0)]),_:1},8,["columns","loading","data-source","selected-keys","onChange","onSortChange"])])])]))}const he=j(oe,[["render",_e]]),ge=Object.freeze(Object.defineProperty({__proto__:null,default:he},Symbol.toStringTag,{value:"Module"}));export{he as default};
