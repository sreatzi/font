import{_ as b,r as x,d as o,u as N,a as k,c as I,b as e,w as _,e as s,R as p,f as O,B as J,p as q,g as f,t as V,s as B}from"./index-987701ae.js";import{m as P}from"./index-3b04c4a4.js";const T={setup(){const d=x(0),i=o.school.value.userId||(JSON.parse(localStorage.getItem("schooll"))||{}).userId||"无",h=o.school.value.schoolName||(JSON.parse(localStorage.getItem("schooll"))||{}).schoolName||"无";d.value=o.passworddd?o.passworddd:JSON.parse(localStorage.getItem("password")),console.log(o.passworddd),console.log(JSON.parse(localStorage.getItem("password")));const l=N();return{id:i,name:h,oldpass:d,sure:async()=>{var y;var g=document.querySelector("#surepas"),u=document.querySelector("#newpas"),t=document.querySelector("#old");const r=u.querySelector("input").value,a=g.querySelector("input").value,c=t.querySelector("input").value;if(a===r&&c===d.value&&a!=""&&c!=""){const S=B.supapi+"/api/User/update",m={Password:a,type:3};console.log(m);const v={method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer "+(((y=JSON.parse(localStorage.getItem("taken")))==null?void 0:y.accessToken)||o.takel.accessToken)},body:JSON.stringify(m)};console.log(m),fetch(S,v).then(n=>n.json()).then(n=>{console.log(n),p.msg(n.message),o.passworddd=a,localStorage.setItem("password",JSON.stringify(o.passworddd)),l.push("/login")}).then(n=>{console.log(n)})}else a!==r?p.msg("请重新确认密码是否相同"):c!==d.value?p.msg("与旧密码不相同"):p.msg("不能输入为空")}}}},C={class:"container-demo"},E=s("p",{style:{"background-color":"#e6e6e6","font-size":"25px"}},"个人信息",-1),j={class:"adaptive-container"},z={class:"form-item"},R=s("p",null,"旧密码:",-1),U={class:"form-item"},A=s("p",null,"新密码:",-1),D={class:"form-item"},F=s("p",null,"确认密码:",-1);function G(d,i,h,l,w,g){const u=P,t=O,r=J,a=q;return k(),I("div",C,[e(u,{theme:"green"},{title:_(()=>[f(" 欢迎:"+V(l.name),1)]),_:1}),e(t,{"border-style":"#e6e6e6","border-width":"3px",theme:"green"},{default:_(()=>[E]),_:1}),s("div",j,[e(t,{class:"line","border-style":"dashed","border-width":"1px",theme:"green"}),s("div",z,[R,e(r,{id:"old",placeholder:"旧密码",modelValue:l.oldpass,"onUpdate:modelValue":i[0]||(i[0]=c=>l.oldpass=c)},null,8,["modelValue"])]),e(t,{class:"line","border-style":"dashed","border-width":"1px",theme:"green"}),s("div",U,[A,e(r,{id:"newpas",placeholder:"新密码"})]),e(t,{class:"line","border-style":"dashed","border-width":"1px",theme:"green"}),s("div",D,[F,e(r,{id:"surepas",placeholder:"确认密码"})]),e(t,{class:"line","border-style":"dashed","border-width":"1px",theme:"green"}),e(a,{class:"submit-button",border:"green",onClick:l.sure},{default:_(()=>[f("提交")]),_:1},8,["onClick"])])])}const L=b(T,[["render",G]]);export{L as default};
