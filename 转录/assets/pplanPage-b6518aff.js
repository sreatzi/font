import{e as ee,d as te,b as oe,o as J,c as E,r as se,n as le,u as ae,_ as ne,v as r,a as s,g as de,x as l,y as i,k as g,R as ce,J as m,S as ie,T as re,z as ue,j as k,t as ye,A as me,B as pe,L as he,D as fe}from"./index-05e97a4c.js";import{V as ge}from"./index-f99f6722.js";const xe=ee(te({name:"LayContainer",props:{fluid:{default:!1}},setup(a){const t=a,b=oe(()=>t.fluid?"layui-fluid":"layui-container");return(e,C)=>(J(),E("div",{class:le(ae(b))},[se(e.$slots,"default")],2))}}));const ve={setup(){const a=r.school.value.userId?r.school.value.userId:JSON.parse(localStorage.getItem("school")).userId,t=r.school.value.schoolName?r.school.value.schoolName:JSON.parse(localStorage.getItem("school")).schoolName,b=[{fixed:"left",width:"10px",type:"radio",title:"单选"},{title:"中职学校代码",width:"10px",key:"secondary_School_id"},{title:"中职学校名称",width:"10px",key:"secondary_School_Name"}],e=[{fixed:"left",width:"10px",type:"radio",title:"单选"},{title:"中职专业代码",width:"10px",key:"majorCode"},{title:"中职专业名称",width:"10px",key:"majorName"}],C=[{fixed:"left",width:"10px",type:"radio",title:"单选"},{title:"高职专业代码",width:"10px",key:"majorCode1"},{title:"高职专业名称",width:"10px",key:"majorName1"}],x=s([]),v=s([]),p=s([]),h=async d=>{console.log(d),ce.api(d)},j=async()=>{var S;const d=x.value.find(function(y){return y.schoolid==T.value}),n=v.value.find(function(y){return y.mojorid==U.value}),u=p.value.find(function(y){return y.mojorid1==I.value}),c={};Object.assign(c,d,n,u);var S=!1;if(Object.keys(_.value).length===0&&d!==void 0&&n!==void 0&&u!==void 0)_.value.push(c);else{let y=!1;_.value.forEach(V=>{V.secondary_School_id===c.secondary_School_id&&V.majorCode===c.majorCode&&V.majorCode1===c.majorCode1&&(y=!0,m.msg("有重复值"))}),console.log(d),console.log(n),console.log(u),y||(d===void 0||n===void 0||u===void 0||d===null||u===null||n===null||JSON.stringify(c).length==2&&!S?(S=!0,m.msg("有空数据不予添加")):_.value.push(c))}console.log(JSON.stringify(c))},f=async()=>{const n=document.querySelector(".box2").querySelector('input[type="text"]').value;console.log(n),await ie.api(n),v.value=r.studata.value},N=async()=>{const n=document.querySelector(".box3").querySelector('input[type="text"]').value;console.log(n),await re.api(n),p.value=r.stuh.value},o=async()=>{var u;const d=me.apiurl+"/api/TranscriptionalRelationship32/getsecondaryschool",n={method:"GET",headers:{Authorization:"Bearer "+(((u=JSON.parse(localStorage.getItem("takel")))==null?void 0:u.accessToken)||r.takel.accessToken)}};try{const S=await(await fetch(d,n)).json();r.stupp.value=S.data,x.value=r.stupp.value,console.log(x.value)}catch(c){console.log("提取失败",c)}};de(()=>{o()});const D=[{title:"中职专业代码",width:"100px",key:"majorCode"},{title:"中职专业名称",width:"100px",key:"majorName"},{title:"高职学校代码",width:"100px",key:"secondary_School_id"},{title:"高职学校名称",width:"100px",key:"secondary_School_Name"},{title:"高职专业代码",width:"100px",key:"majorCode1"},{title:"高职专业名称",width:"100px",key:"majorName1",ellipsisTooltip:!0},{title:"操作",width:"50px",key:"remark1",customSlot:"operator",ellipsisTooltip:!0}],_=s([]),R=s(),T=s("1"),K=s(["2","3","6","7"]),q=()=>{K.value=["1","2","3"]},A=()=>{K.value=[]},L=()=>{m.msg(K.value)},P=()=>{m.msg(R.value.getCheckData())},O=s(),U=s("1"),z=s(["2","3","6","7"]),G=()=>{z.value=["1","2","3"]},M=()=>{z.value=[]},F=()=>{m.msg(K.value)},H=()=>{m.msg(O.value.getCheckData())},B=s(),I=s("1"),w=s(["2","3","6","7"]),Q=()=>{w.value=["1","2","3"]},W=()=>{w.value=[]},X=()=>{m.msg(w.value)},Y=()=>{m.msg(B.value.getCheckData())},Z=s(1),$=s(0);return s(0),s(0),{id:a,name:t,stuadd:h,add:j,suret:N,sures:f,columns3:b,columns2:e,columns1:C,dataSource3:x,dataSource1:p,dataSource2:v,selectedKeys3:K,getSelectedKeys3:L,getCheckData3:P,tableRef3:R,changeSelectedKeys3:q,clearSelectedKeys3:A,selectedKey3:T,selectedKeys2:z,getSelectedKeys2:F,getCheckData2:H,tableRef2:O,changeSelectedKeys2:G,clearSelectedKeys2:M,selectedKey2:U,selectedKeys1:w,getSelectedKeys1:X,getCheckData1:Y,tableRef1:B,changeSelectedKeys1:Q,clearSelectedKeys1:W,selectedKey1:I,selected1:Z,data1:$,columns8:D,dataSource8:_}}},_e={class:"container-demo"},Ke={class:"allbox"},Se={class:"box1"},ke=g("template",null,null,-1),be={class:"box2"},je={class:"box3"},we={class:"wordtable",style:{height:"300px"}};function Ce(a,t,b,e,C,x){const v=ue,p=pe,h=ge,j=he,f=fe,N=xe;return J(),E("div",_e,[l(v,{theme:"green"},{title:i(()=>[k(" 欢迎:"+ye(e.name),1)]),_:1}),l(p,{"border-style":"dashed","border-width":"3px",theme:"green"}),l(N,{fluid:""},{default:i(()=>[g("div",Ke,[g("div",Se,[l(h,{height:"315px",ref:"tableRef3",columns:e.columns3,id:"schoolid","data-source":e.dataSource3,size:a.sm,selectedKey:e.selectedKey3,"onUpdate:selectedKey":t[0]||(t[0]=o=>e.selectedKey3=o),style:{"dis90=-play":"flex","align-items":"center","justify-content":"center"}},{default:i(()=>[ke]),_:1},8,["columns","data-source","size","selectedKey"])]),g("div",be,[l(h,{height:"315px",ref:"tableRef3",id:"mojorid",columns:e.columns2,"data-source":e.dataSource2,size:a.sm,"default-toolbar":!0,selectedKey:e.selectedKey2,"onUpdate:selectedKey":t[2]||(t[2]=o=>e.selectedKey2=o),selectedKeys:e.selectedKeys2,"onUpdate:selectedKeys":t[3]||(t[3]=o=>e.selectedKeys2=o),style:{display:"flex","align-items":"center","justify-content":"center"}},{toolbar:i(()=>[l(j,{type:"text",style:{width:"100px"},modelValue:a.data2,"onUpdate:modelValue":t[1]||(t[1]=o=>a.data2=o),max:300,min:100},null,8,["modelValue"]),l(f,{onClick:e.sures},{default:i(()=>[k("确定")]),_:1},8,["onClick"])]),_:1},8,["columns","data-source","size","selectedKey","selectedKeys"])]),g("div",je,[l(h,{height:"315px",ref:"tableRef3",id:"mojorid1",columns:e.columns1,"data-source":e.dataSource1,size:a.sm,"default-toolbar":!0,selectedKey:e.selectedKey1,"onUpdate:selectedKey":t[5]||(t[5]=o=>e.selectedKey1=o),selectedKeys:e.selectedKeys1,"onUpdate:selectedKeys":t[6]||(t[6]=o=>e.selectedKeys1=o),style:{display:"flex","align-items":"center","justify-content":"center"}},{toolbar:i(()=>[l(j,{type:"text",style:{width:"100px"},modelValue:a.data3,"onUpdate:modelValue":t[4]||(t[4]=o=>a.data3=o),max:300,min:100},null,8,["modelValue"]),l(f,{onClick:e.suret},{default:i(()=>[k("确定")]),_:1},8,["onClick"])]),_:1},8,["columns","data-source","size","selectedKey","selectedKeys"])])])]),_:1}),l(p,{"border-style":"dashed","border-width":"3px",theme:"green"}),g("div",we,[l(h,{columns:e.columns8,"data-source":e.dataSource8,height:"100%",page:a.page,resize:!0,loading:a.loading,"default-toolbar":!0,even:""},{toolbar:i(()=>[l(f,{size:"sm",type:"primary",onClick:e.add},{default:i(()=>[k("新增")]),_:1},8,["onClick"])]),operator:i(({row:o})=>[l(f,{size:"xs",type:"primary",onClick:D=>e.stuadd(o)},{default:i(()=>[k("添加")]),_:2},1032,["onClick"])]),_:1},8,["columns","data-source","page","loading"])]),l(p,{"border-style":"dashed","border-width":"3px",theme:"green"})])}const Ve=ne(ve,[["render",Ce]]);export{Ve as default};
